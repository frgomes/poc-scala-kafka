#!/bin/bash

export ZOOKEEPER_HOST=localhost
export ZOOKEEPER_PORT=2181
export KAFKA_HOST=localhost
export KAFKA_PORT=9092
export TOPIC=test

echo "listeners=PLAINTEXT://${KAFKA_HOST}:${KAFKA_PORT}" >> $KAFKA_HOME/config/server.properties

$KAFKA_HOME/bin/zookeeper-server-start.sh $KAFKA_HOME/config/zookeeper.properties
$KAFKA_HOME/bin/kafka-server-start.sh $KAFKA_HOME/config/server.properties
$KAFKA_HOME/bin/kafka-topics.sh --zookeeper ${ZOOKEEPER_HOST}:${ZOOKEEPER_PORT} --list
$KAFKA_HOME/bin/kafka-topics.sh --create --if-not-exists --zookeeper ${ZOOKEEPER_HOST}:${ZOOKEEPER_PORT} --partitions 1 --replication-factor 1 --topic ${TOPIC}
$KAFKA_HOME/bin/kafka-console-producer.sh --broker-list ${KAFKA_HOST}:${KAFKA_PORT} --topic ${TOPIC}
$KAFKA_HOME/bin/kafka-console-consumer.sh --broker-list ${KAFKA_HOST}:${KAFKA_PORT} --topic ${TOPIC}
